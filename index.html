<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta content="IE=edge,chrome=1" http-equiv="X-UA-Compatible">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <title>API Reference</title>

    <style>
      .highlight table td { padding: 5px; }
.highlight table pre { margin: 0; }
.highlight, .highlight .w {
  color: #f8f8f2;
  background-color: #272822;
}
.highlight .err {
  color: #151515;
  background-color: #ac4142;
}
.highlight .c, .highlight .cd, .highlight .cm, .highlight .c1, .highlight .cs {
  color: #505050;
}
.highlight .cp {
  color: #f4bf75;
}
.highlight .nt {
  color: #f4bf75;
}
.highlight .o, .highlight .ow {
  color: #d0d0d0;
}
.highlight .p, .highlight .pi {
  color: #d0d0d0;
}
.highlight .gi {
  color: #90a959;
}
.highlight .gd {
  color: #ac4142;
}
.highlight .gh {
  color: #6a9fb5;
  background-color: #151515;
  font-weight: bold;
}
.highlight .k, .highlight .kn, .highlight .kp, .highlight .kr, .highlight .kv {
  color: #aa759f;
}
.highlight .kc {
  color: #d28445;
}
.highlight .kt {
  color: #d28445;
}
.highlight .kd {
  color: #d28445;
}
.highlight .s, .highlight .sb, .highlight .sc, .highlight .sd, .highlight .s2, .highlight .sh, .highlight .sx, .highlight .s1 {
  color: #90a959;
}
.highlight .sr {
  color: #75b5aa;
}
.highlight .si {
  color: #8f5536;
}
.highlight .se {
  color: #8f5536;
}
.highlight .nn {
  color: #f4bf75;
}
.highlight .nc {
  color: #f4bf75;
}
.highlight .no {
  color: #f4bf75;
}
.highlight .na {
  color: #6a9fb5;
}
.highlight .m, .highlight .mf, .highlight .mh, .highlight .mi, .highlight .il, .highlight .mo, .highlight .mb, .highlight .mx {
  color: #90a959;
}
.highlight .ss {
  color: #90a959;
}
    </style>
    <link href="stylesheets/screen.css" rel="stylesheet" media="screen" />
    <link href="stylesheets/print.css" rel="stylesheet" media="print" />
      <script src="javascripts/all.js"></script>
  </head>

  <body class="index" data-languages="[&quot;shell&quot;,&quot;javascript&quot;]">
    <a href="#" id="nav-button">
      <span>
        NAV
        <img src="images/navbar.png" />
      </span>
    </a>
    <div class="tocify-wrapper">
      <img src="images/logo.png" />
        <div class="lang-selector">
              <a href="#" data-language-name="shell">shell</a>
              <a href="#" data-language-name="javascript">javascript</a>
        </div>
        <div class="search">
          <input type="text" class="search" id="input-search" placeholder="Search">
        </div>
        <ul class="search-results"></ul>
      <div id="toc">
      </div>
        <ul class="toc-footer">
            <li><a href='#'>Sign Up for a Developer Key</a></li>
            <li><a href='https://github.com/tripit/slate'>Documentation Powered by Slate</a></li>
        </ul>
    </div>
    <div class="page-wrapper">
      <div class="dark-box"></div>
      <div class="content">
        <h1 id="introduction">Introduction</h1>

<p>This is the <a href="http://www.adrapid.com">AdRapid</a> public API v1.0 documentation</p>

<h3 id="basic-description-of-the-order-workflow">Basic description of the order workflow</h3>

<p><code class="prettyprint">AdRapid</code> is a rendering platform used for rendering a variety of <code class="prettyprint">ads</code>. We support a number of <em>ad types</em> - these include <em>html5 banners</em>, <em>flash banners</em>, <em>video</em>, as well as <em>printed material</em>. The rendering platform is based around a concept of <code class="prettyprint">clients</code>, <code class="prettyprint">templates</code> and <code class="prettyprint">orders</code>. </p>

<p>Every <code class="prettyprint">client</code> has access to a given set of <code class="prettyprint">templates</code>. A <code class="prettyprint">template</code> describes the overall layout of an ad. A template also contains a set of available <code class="prettyprint">ad formats</code>, for different types of ads as listed above. The end user supplies texts, images and colors, as well as the desired <code class="prettyprint">ad formats</code>, resulting in an <code class="prettyprint">order</code>. </p>

<p>The resulting order is sent in an <code class="prettyprint">order request</code>, using the <code class="prettyprint">send order</code> method. An <code class="prettyprint">order request</code> must include the selected template, as well as the desired content (texts, colors, images).</p>

<p>Orders may be tracked in real time using <em>server-sent events</em>. Alternatively, a request may also be sent to an URL of choice, if specified in the order request.</p>

<h3 id="api-url">API URL</h3>

<p>The base URL for all API requests is <code class="prettyprint">http://api.adrapid.com/</code>. A set of public methods are available as specified in this document.</p>

<h1 id="authentication">Authentication</h1>

<blockquote>
<p>To authorize, use this code:</p>
</blockquote>
<pre class="highlight javascript"><code><span class="kd">var</span> <span class="nx">adrapid</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">'adrapid'</span><span class="p">)({</span>
  <span class="na">url</span><span class="p">:</span> <span class="s1">'http://api.adrapid.com/'</span><span class="p">,</span>
  <span class="na">key</span><span class="p">:</span> <span class="s1">'my API Key'</span><span class="p">,</span>
  <span class="na">token</span><span class="p">:</span> <span class="s1">'my secret token'</span>
<span class="p">});</span>

</code></pre>
<pre class="highlight shell"><code><span class="c"># With shell, you can just pass the correct header with each request</span>
curl http://api.adrapid.com/
  -H <span class="s2">"Authorization: myAPIKey"</span>
</code></pre>

<blockquote>
<p>Make sure to replace <code class="prettyprint">my API Key</code> and <code class="prettyprint">my secret token</code> with your API key and token respectively.</p>
</blockquote>

<p>Each client has an private API-key as well as an public API-key. Every template/project has an unique API-key/identifier. The private client API-key should never be send in itself, but is used for generating authentication tokens. Currently only the public client API-key is needed for authentication for most of the API methods.</p>

<p>You can register for a new AdRapid API key at our <a href="http://adrapid.com/developers">developer portal</a>.</p>

<aside class="warning">Autentication is disabled for the `adrapiddemo` account - only the `public key` needs to be provided.</aside>

<aside class="notice">
You must replace <code>my API Key</code> and <code>my secret token</code> with your
personal API key and token respectively.
</aside>

          <h1 id="templates">Templates</h1>

<p>Templates are the basic structure from which a banner or other type of
supported output media (also called <em>item</em>) can be generated.
You start by getting all the templates available for the current user, then select the
proper one as well as its rules and supported formats and finally you can you can
send orders based on the given template.</p>

<h2 id="get-templates">Get templates</h2>
<pre class="highlight shell"><code>curl <span class="s2">"http://api.adrapid.com/templates"</span>
  -H <span class="s2">"Authorization: my API key"</span>
</code></pre>
<pre class="highlight javascript"><code><span class="kd">var</span> <span class="nx">adrapid</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">'adrapid'</span><span class="p">)({</span>
  <span class="na">url</span><span class="p">:</span> <span class="s1">'http://api.adrapid.com/'</span><span class="p">,</span>
  <span class="na">key</span><span class="p">:</span> <span class="s1">'my API key'</span><span class="p">,</span>
  <span class="na">token</span><span class="p">:</span> <span class="s1">'my secret token'</span>
<span class="p">});</span>

<span class="nx">adrapid</span><span class="p">.</span><span class="nx">getTemplates</span><span class="p">().</span><span class="nx">then</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">templates</span><span class="p">){</span>
  <span class="c1">// do something with our templates</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">templates</span><span class="p">);</span>
<span class="p">},</span> <span class="kd">function</span><span class="p">(</span><span class="nx">err</span><span class="p">){</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">error</span><span class="p">(</span><span class="s1">'Error getting templates'</span><span class="p">,</span> <span class="nx">err</span><span class="p">);</span>
<span class="p">});</span>

</code></pre>

<blockquote>
<p>Example result of calling the get templates method</p>
</blockquote>
<pre class="highlight json"><code><span class="p">[{</span><span class="w">
  </span><span class="nt">"id"</span><span class="p">:</span><span class="w">         </span><span class="s2">"qual3097a002fdaeeb02a79e877bb9bda7e502ae"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"name"</span><span class="p">:</span><span class="w">       </span><span class="s2">"AdRapid product 1"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"identifier"</span><span class="p">:</span><span class="w"> </span><span class="s2">"adrapid-product00001"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"thumbnail"</span><span class="p">:</span><span class="w">  </span><span class="s2">"http://adrapid.com/thumbnail.jpg"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"group"</span><span class="p">:</span><span class="w">      </span><span class="s2">"product"</span><span class="w">
</span><span class="p">},</span><span class="w">
</span><span class="p">{</span><span class="w">
  </span><span class="nt">"id"</span><span class="p">:</span><span class="w">         </span><span class="s2">"snowwq97a0l2fdabeb02a79e877bb9bda7e502ae"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"name"</span><span class="p">:</span><span class="w">       </span><span class="s2">"Product snow"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"identifier"</span><span class="p">:</span><span class="w"> </span><span class="s2">"mxm-product_snow"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"thumbnail"</span><span class="p">:</span><span class="w">  </span><span class="s2">"http://adrapid.com/thumbnail.jpg"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"group"</span><span class="p">:</span><span class="w">      </span><span class="s2">"product"</span><span class="w">
</span><span class="p">},</span><span class="w">
</span><span class="p">{</span><span class="w">
  </span><span class="nt">"id"</span><span class="p">:</span><span class="w">         </span><span class="s2">"service-image_xbeb02a79e877bb9bda7e502ae"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"name"</span><span class="p">:</span><span class="w">       </span><span class="s2">"Service image"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"identifier"</span><span class="p">:</span><span class="w"> </span><span class="s2">"mxm-service_image"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"thumbnail"</span><span class="p">:</span><span class="w">  </span><span class="s2">"http://adrapid.com/thumbnail.jpg"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"group"</span><span class="p">:</span><span class="w">      </span><span class="s2">"real_estate"</span><span class="w">
</span><span class="p">}]</span><span class="w">
</span></code></pre>

<p>Get available templates for a given client. Returns a list of available templates for the client with the supplied <code class="prettyprint">public API key</code>.</p>

<p>For each template, a <code class="prettyprint">template ID</code>, <code class="prettyprint">identifier</code>, <code class="prettyprint">name</code> and <code class="prettyprint">thumbnail</code> is supplied. The <code class="prettyprint">template ID</code> is unique for the template, and must be included in the <code class="prettyprint">order request</code> for identifying the selected template. </p>

<p>The <code class="prettyprint">name</code> and <code class="prettyprint">identifier</code> fields contain names of the template, which you may use internally as you wish - ie. for identifying templates or displaying readable template names to the end user.</p>

<p>The <code class="prettyprint">thumbnail</code> field contains a URL to a jpeg image which may be used for displaying a overview of the template in your UI.</p>

<p>The <code class="prettyprint">group</code> property describes the <code class="prettyprint">content-type</code> required for the template. Our templates are designed for different use cases - for example, the fields/content required in a template for real estate ads will differ from the fields required in a template for producing online product ads.</p>

<p>To get the rules for a specific template, call the <code class="prettyprint">template rules</code> method, supplying the <code class="prettyprint">template ID</code> to the method call.</p>

<aside class="success">
Hint: use the `group` property to filter templates client-side. 
</aside>

<h3 id="http-request">HTTP Request</h3>

<p><code class="prettyprint">GET http://api.adrapid.com/templates</code></p>

<h2 id="getting-rules-for-template">Getting rules for template</h2>
<pre class="highlight javascript"><code><span class="kd">var</span> <span class="nx">adrapid</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">'adrapid'</span><span class="p">)({</span>
  <span class="na">url</span><span class="p">:</span> <span class="s1">'http://api.adrapid.com/'</span><span class="p">,</span>
  <span class="na">key</span><span class="p">:</span> <span class="s1">'my API key'</span><span class="p">,</span>
  <span class="na">token</span><span class="p">:</span> <span class="s1">'my secret token'</span>
<span class="p">});</span>

<span class="nx">adrapid</span><span class="p">.</span><span class="nx">getRules</span><span class="p">(</span><span class="nx">templateId</span><span class="p">).</span><span class="nx">then</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">rules</span><span class="p">){</span>

<span class="p">},</span> <span class="kd">function</span><span class="p">(</span><span class="nx">err</span><span class="p">){</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">error</span><span class="p">(</span><span class="s1">'Error getting templates'</span><span class="p">,</span> <span class="nx">err</span><span class="p">);</span>
<span class="p">});</span>

</code></pre>
<pre class="highlight shell"><code>curl <span class="s2">"http://api.adrapid.com/templates/</span><span class="nv">$TEMPLATE_ID</span><span class="s2">/rules"</span>
  -H <span class="s2">"Authorization: my API key"</span>
</code></pre>

<blockquote>
<p>Example result of calling the get template rules method</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
   </span><span class="nt">"id"</span><span class="p">:</span><span class="w">    </span><span class="s2">"6066cd7b8712507a5b0d547aa64c370a91ac3f91"</span><span class="p">,</span><span class="w">
   </span><span class="nt">"name"</span><span class="p">:</span><span class="w">  </span><span class="s2">"demo-phones"</span><span class="p">,</span><span class="w">
   </span><span class="nt">"formats"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
      </span><span class="s2">"120x600"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"160x600"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"200x200"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"240x400"</span><span class="w">
   </span><span class="p">],</span><span class="w">
   </span><span class="nt">"fields"</span><span class="p">:[</span><span class="w">
      </span><span class="p">{</span><span class="w">
         </span><span class="nt">"name"</span><span class="p">:</span><span class="w">        </span><span class="s2">"text_field1_1"</span><span class="p">,</span><span class="w">
         </span><span class="nt">"label"</span><span class="p">:</span><span class="w">       </span><span class="s2">"Product name"</span><span class="p">,</span><span class="w">
         </span><span class="nt">"type"</span><span class="p">:</span><span class="w">        </span><span class="s2">"text"</span><span class="p">,</span><span class="w">
         </span><span class="nt">"max_length"</span><span class="p">:</span><span class="w">  </span><span class="mi">20</span><span class="p">,</span><span class="w">
         </span><span class="nt">"default"</span><span class="p">:</span><span class="w">     </span><span class="s2">"AdRapid Phone"</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="p">{</span><span class="w">
         </span><span class="nt">"name"</span><span class="p">:</span><span class="w">        </span><span class="s2">"text_sign2_1"</span><span class="p">,</span><span class="w">
         </span><span class="nt">"label"</span><span class="p">:</span><span class="w">       </span><span class="s2">"Price"</span><span class="p">,</span><span class="w">
         </span><span class="nt">"type"</span><span class="p">:</span><span class="w">        </span><span class="s2">"text"</span><span class="p">,</span><span class="w">
         </span><span class="nt">"max_length"</span><span class="p">:</span><span class="w">  </span><span class="mi">6</span><span class="p">,</span><span class="w">
         </span><span class="nt">"default"</span><span class="p">:</span><span class="w">     </span><span class="s2">"$399"</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="p">{</span><span class="w">
         </span><span class="nt">"name"</span><span class="p">:</span><span class="w">        </span><span class="s2">"img_1"</span><span class="p">,</span><span class="w">
         </span><span class="nt">"label"</span><span class="p">:</span><span class="w">       </span><span class="s2">"Product image"</span><span class="p">,</span><span class="w">
         </span><span class="nt">"type"</span><span class="p">:</span><span class="w">        </span><span class="s2">"image"</span><span class="p">,</span><span class="w">
         </span><span class="nt">"default"</span><span class="p">:</span><span class="w">     </span><span class="s2">"http://adrapid.com/image.png"</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="p">{</span><span class="w">
         </span><span class="nt">"name"</span><span class="p">:</span><span class="w">        </span><span class="s2">"img_2"</span><span class="p">,</span><span class="w">
         </span><span class="nt">"label"</span><span class="p">:</span><span class="w">       </span><span class="s2">"Product logo"</span><span class="p">,</span><span class="w">
         </span><span class="nt">"type"</span><span class="p">:</span><span class="w">        </span><span class="s2">"image"</span><span class="p">,</span><span class="w">
         </span><span class="nt">"default"</span><span class="p">:</span><span class="w">     </span><span class="s2">"http://adrapid.com/image.png"</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="p">{</span><span class="w">
         </span><span class="nt">"name"</span><span class="p">:</span><span class="w">        </span><span class="s2">"color_background1"</span><span class="p">,</span><span class="w">
         </span><span class="nt">"label"</span><span class="p">:</span><span class="w">       </span><span class="s2">"Background color"</span><span class="p">,</span><span class="w">
         </span><span class="nt">"type"</span><span class="p">:</span><span class="w">        </span><span class="s2">"color"</span><span class="p">,</span><span class="w">
         </span><span class="nt">"default"</span><span class="p">:</span><span class="w">     </span><span class="s2">"#b8594c"</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="p">{</span><span class="w">
         </span><span class="nt">"name"</span><span class="p">:</span><span class="w">        </span><span class="s2">"color_texts"</span><span class="p">,</span><span class="w">
         </span><span class="nt">"label"</span><span class="p">:</span><span class="w">       </span><span class="s2">"Text color"</span><span class="p">,</span><span class="w">
         </span><span class="nt">"type"</span><span class="p">:</span><span class="w">        </span><span class="s2">"color"</span><span class="p">,</span><span class="w">
         </span><span class="nt">"default"</span><span class="p">:</span><span class="w">     </span><span class="s2">"#ffffff"</span><span class="w">
      </span><span class="p">}</span><span class="w">
   </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<p>Get the rules for a given template. The rules of a template defines which datatypes are allowed for every field available in the template (texts, images, colors), as well as the supported output formats.</p>

<p>Rules for maximum text length (total characters) is supplied for every text field.</p>

<p>Images are resized to optimally fit the provided image area when rendering every banner, however, an optimal ratio is supplied in the rules for image fields. Images should preferably be provided in the largest resolution possible, especially when producing ads for printed materials.</p>

<p>The following table shows the available field types:</p>

<table><thead>
<tr>
<th>type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>text</td>
<td>A string of text of a maximum length</td>
</tr>
<tr>
<td>image</td>
<td>An valid image</td>
</tr>
<tr>
<td>color</td>
<td>A valid color specification</td>
</tr>
</tbody></table>

<h3 id="http-request">HTTP Request</h3>

<p><code class="prettyprint">GET http://api.adrapid.com/templates/:id/rules</code></p>

<h3 id="url-parameters">URL parameters</h3>

<table><thead>
<tr>
<th>Parameter</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>:id</td>
<td>The ID of template.</td>
</tr>
</tbody></table>

<h2 id="retrieving-template-preview">Retrieving template preview</h2>

<p>It is also possible to retrieve a quick preview of a template before actually sending
a time consuming order.</p>

<p>Returns a html preview.</p>

<aside class="warning">Currently autentication is not implemented.</aside>

<h3 id="http-request">HTTP Request</h3>

<p><code class="prettyprint">GET http://api.adrapid.com/templates/:id/preview</code></p>

<h3 id="url-parameters">URL parameters</h3>

<table><thead>
<tr>
<th>Parameter</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>id</td>
<td>The ID of template.</td>
</tr>
</tbody></table>

          <h1 id="orders">Orders</h1>

<p>Orders are used to generate the banners (items) from a given template. Orders are long
running processes that their completion time depends on many factors, such as number
of items, complexity, image quality, etc.</p>

<p>AdRapid will run orders in an optimized parallel engine that will be able to quickly render the
results in typically less than one minute.</p>

<h2 id="send-order">Send Order</h2>
<pre class="highlight javascript"><code><span class="kd">var</span> <span class="nx">adrapid</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">'adrapid'</span><span class="p">)({</span>
  <span class="na">url</span><span class="p">:</span> <span class="s1">'http://api.adrapid.com'</span><span class="p">,</span>
  <span class="na">key</span><span class="p">:</span> <span class="s1">'my API key'</span><span class="p">,</span>
  <span class="na">token</span><span class="p">:</span> <span class="s1">'my secret token'</span>
<span class="p">});</span>

<span class="kd">var</span> <span class="nx">order</span> <span class="o">=</span> <span class="p">{</span>
  <span class="s2">"templateId"</span><span class="p">:</span>         <span class="s2">"qual3097a002fdaeeb02a79e877bb9bda7e502ae"</span><span class="p">,</span>
  <span class="s2">"formats"</span><span class="p">:</span>            <span class="s2">"banner_300x250,banner_300x60,banner_980x240"</span><span class="p">,</span> <span class="s2">"text_field1_1"</span><span class="p">:</span>      <span class="s2">"Sony Xperia Z3"</span><span class="p">,</span>
  <span class="s2">"text_field1_2"</span><span class="p">:</span>      <span class="s2">"The brand new"</span><span class="p">,</span>
  <span class="s2">"text_field1_3"</span><span class="p">:</span>      <span class="s2">"city mobile"</span><span class="p">,</span>
  <span class="s2">"text_field1_7"</span><span class="p">:</span>      <span class="s2">"Valid until 14/12/14"</span><span class="p">,</span>
  <span class="s2">"text_sign2_1"</span><span class="p">:</span>       <span class="s2">"$199"</span><span class="p">,</span>
  <span class="s2">"text_sign1_2"</span><span class="p">:</span>       <span class="s2">"Org. price $399"</span><span class="p">,</span>
  <span class="s2">"text_sign1_4"</span><span class="p">:</span>       <span class="s2">"NOW!"</span><span class="p">,</span>
  <span class="s2">"text_sign1_3"</span><span class="p">:</span>       <span class="s2">"Buy now!"</span><span class="p">,</span>
  <span class="s2">"text_sign1_1"</span><span class="p">:</span>       <span class="s2">"XPERIA Z3"</span><span class="p">,</span>
  <span class="s2">"text_field1_4"</span><span class="p">:</span>      <span class="s2">"Waterproof"</span><span class="p">,</span>
  <span class="s2">"text_field1_5"</span><span class="p">:</span>      <span class="s2">"5.2-inch 4K screen"</span><span class="p">,</span>
  <span class="s2">"text_field1_6"</span><span class="p">:</span>      <span class="s2">"920 standby hours"</span><span class="p">,</span>
  <span class="s2">"img_1"</span><span class="p">:</span>              <span class="s2">"http://my-site.com/img/product.png"</span><span class="p">,</span>
  <span class="s2">"img_2"</span><span class="p">:</span>              <span class="s2">"http://my-site.com/img/logo.png"</span><span class="p">,</span>
  <span class="s2">"img_3"</span><span class="p">:</span>              <span class="s2">"http://my-site.com/img/background.jpg"</span><span class="p">,</span>
  <span class="s2">"color_background1"</span><span class="p">:</span>  <span class="s2">"#3399ff"</span><span class="p">,</span>
  <span class="s2">"color_sign1"</span><span class="p">:</span>        <span class="s2">"#ff6600"</span><span class="p">,</span>
  <span class="s2">"color_text_field1"</span><span class="p">:</span>  <span class="s2">"#333333"</span><span class="p">,</span>
  <span class="s2">"color_text_sign1"</span><span class="p">:</span>   <span class="s2">"#3344ff"</span><span class="p">,</span>
  <span class="s2">"client_data"</span><span class="p">:</span>        <span class="s2">"my own ID"</span><span class="p">,</span>
  <span class="s2">"callback_url"</span><span class="p">:</span>       <span class="s2">"http://my-site.com/order_callback.php"</span>
<span class="p">}</span>

<span class="nx">adrapid</span><span class="p">.</span><span class="nx">sendOrder</span><span class="p">(</span><span class="nx">order</span><span class="p">).</span><span class="nx">then</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">orderId</span><span class="p">){</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">'order sent with id:'</span><span class="p">,</span> <span class="nx">orderId</span><span class="p">);</span>
<span class="p">},</span> <span class="kd">function</span><span class="p">(</span><span class="nx">err</span><span class="p">){</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">error</span><span class="p">(</span><span class="s1">'order failed'</span><span class="p">,</span> <span class="nx">err</span><span class="p">);</span>
<span class="p">});</span>
</code></pre>
<pre class="highlight shell"><code>curl -d @order.json --header <span class="s2">"Content-Type:application/json"</span> <span class="s2">"http://api.adrapid.com/orders"</span>
  -H <span class="s2">"Authorization: my API key"</span>
</code></pre>

<blockquote>
<p>example order data</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"templateId"</span><span class="p">:</span><span class="w">         </span><span class="s2">"qual3097a002fdaeeb02a79e877bb9bda7e502ae"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"formats"</span><span class="p">:</span><span class="w">            </span><span class="s2">"banner_300x250,banner_300x60,banner_980x240"</span><span class="p">,</span><span class="w"> 
  </span><span class="nt">"text_field1_1"</span><span class="p">:</span><span class="w">      </span><span class="s2">"Sony Xperia Z3"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"text_field1_2"</span><span class="p">:</span><span class="w">      </span><span class="s2">"The brand new"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"text_field1_3"</span><span class="p">:</span><span class="w">      </span><span class="s2">"city mobile"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"text_field1_7"</span><span class="p">:</span><span class="w">      </span><span class="s2">"Valid until 14\/12\/14"</span><span class="p">,</span><span class="w"> 
  </span><span class="nt">"text_sign2_1"</span><span class="p">:</span><span class="w">       </span><span class="s2">"$199"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"text_sign1_2"</span><span class="p">:</span><span class="w">       </span><span class="s2">"Org. price $399"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"text_sign1_4"</span><span class="p">:</span><span class="w">       </span><span class="s2">"NOW!"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"text_sign1_3"</span><span class="p">:</span><span class="w">       </span><span class="s2">"Buy now!"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"text_sign1_1"</span><span class="p">:</span><span class="w">       </span><span class="s2">"XPERIA Z3"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"text_field1_4"</span><span class="p">:</span><span class="w">      </span><span class="s2">"Waterproof"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"text_field1_5"</span><span class="p">:</span><span class="w">      </span><span class="s2">"5.2-inch 4K screen"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"text_field1_6"</span><span class="p">:</span><span class="w">      </span><span class="s2">"920 standby hours"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"img_1"</span><span class="p">:</span><span class="w">              </span><span class="s2">"http://my-site.com/img/product.png"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"img_2"</span><span class="p">:</span><span class="w">              </span><span class="s2">"http://my-site.com/img/logo.png"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"img_3"</span><span class="p">:</span><span class="w">              </span><span class="s2">"http://my-site.com/img/background.jpg"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"color_background1"</span><span class="p">:</span><span class="w">  </span><span class="s2">"#3399ff"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"color_sign1"</span><span class="p">:</span><span class="w">        </span><span class="s2">"#ff6600"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"color_text_field1"</span><span class="p">:</span><span class="w">  </span><span class="s2">"#333333"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"color_text_sign1"</span><span class="p">:</span><span class="w">   </span><span class="s2">"#3344ff"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"callback_url"</span><span class="p">:</span><span class="w">       </span><span class="s2">"http://my-site.com/order_callback.php"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"client_data"</span><span class="p">:</span><span class="w">        </span><span class="s2">"my own ID"</span><span class="p">,</span><span class="w">
</span><span class="err">}</span><span class="w">
</span></code></pre>

<p>This endpoint posts an order to generate a set of banners based on a given template data.</p>

<h3 id="http-request">HTTP Request</h3>

<p><code class="prettyprint">POST http://api.adrapid.com/orders</code></p>

<p>Returns an <code class="prettyprint">order ID</code> that can be used by other APIs to retrieve order status and events.</p>

<h3 id="mandatory-body-parameters">Mandatory Body parameters</h3>

<table><thead>
<tr>
<th>Parameter</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>templateId</td>
<td>The ID of template to use for the order.</td>
</tr>
<tr>
<td>formats</td>
<td>The requested formats, at least one valid ad format.</td>
</tr>
</tbody></table>

<p>The required fields for the ad content is supplied by the <code class="prettyprint">template rules</code> method. No validation is required for text fields. However, produced ads will look empty if fields are missing, and texts will be clipped if they exceed the <code class="prettyprint">max_length</code> limit.</p>

<p>Invalid or missing colors and images are simply ignored, and will not cause an error.</p>

<aside class="success">
Hint: use the Events API to retrieve real time status of your order!
</aside>

<h3 id="sending-images">Sending images</h3>

<p>Images can be send as either a <em>URL</em>, raw binary data (ie. as standard &ldquo;HTTP post&rdquo;), or as a <em>base64-encoded</em> string.</p>

<blockquote>
<p>All these color examples are valid:</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
    </span><span class="nt">"color_background1"</span><span class="p">:</span><span class="w"> </span><span class="s2">"#3399ff"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"color_sign1"</span><span class="p">:</span><span class="w">       </span><span class="s2">"hsl(200,10,20)"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"color_text_field1"</span><span class="p">:</span><span class="w"> </span><span class="s2">"rgba(100, 250, 0, 0.55)"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"color_text_sign1"</span><span class="p">:</span><span class="w">  </span><span class="s2">"cmyk(1, 2, 3, 4)"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<h3 id="sending-colors">Sending colors</h3>

<p>Colors can be send in HEX, rgb(a), CMYK or HSL.</p>

<h3 id="setting-banner-video-formats-for-order">Setting banner/video formats for order</h3>

<p>Order formats are determined by the <code class="prettyprint">formats</code> string. The formats string should contain a set of
order items, separated by commas. Each item is named by its format, separated by an underscore,
followed by the size or identifier.</p>

<p>For example banner_320x160 and video_horizontal_15s ar valid formats. Some formats string examples:</p>

<p><code class="prettyprint">banner_980x240, banner_300x1050:google_adwords, video_horizontal_15s</code></p>

<p>Available formats for a given template could be retrieved using the <em>get template formats</em> API.</p>

<h3 id="include-custom-data-and-returning-via-a-callback-url">Include custom data and returning via a callback url</h3>

<p>Order requests may contain own <code class="prettyprint">client_data</code>, which if included will be passed through
the order and returned in the request to given <code class="prettyprint">callback_url</code>.</p>

<p><code class="prettyprint">client_data</code>, may contain any string, such as any valid an json object. When the order is completed,
a request is made to the url specified in the <code class="prettyprint">callback_url</code>, containing the order ID as well as
the <code class="prettyprint">client_data</code> string.</p>

<h2 id="get-order">Get order</h2>
<pre class="highlight javascript"><code><span class="kd">var</span> <span class="nx">adrapid</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">'adrapid'</span><span class="p">)({</span>
  <span class="na">url</span><span class="p">:</span> <span class="s1">'http://api.adrapid.com/'</span><span class="p">,</span>
  <span class="na">key</span><span class="p">:</span> <span class="s1">'my API key'</span><span class="p">,</span>
  <span class="na">token</span><span class="p">:</span> <span class="s1">'my secret token'</span>
<span class="p">});</span>

<span class="nx">adrapid</span><span class="p">.</span><span class="nx">getOrder</span><span class="p">(</span><span class="nx">orderId</span><span class="p">).</span><span class="nx">then</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">order</span><span class="p">){</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">order</span><span class="p">)</span>
<span class="p">},</span> <span class="kd">function</span><span class="p">(</span><span class="nx">err</span><span class="p">){</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">error</span><span class="p">(</span><span class="nx">err</span><span class="p">);</span>
<span class="p">});</span>
</code></pre>
<pre class="highlight shell"><code>curl <span class="s2">"http://api.adrapid.com/orders/</span><span class="nv">$MY_ORDER_ID</span><span class="s2">"</span>
  -H <span class="s2">"Authorization: my API key"</span>
</code></pre>

<blockquote>
<p>The above command returns JSON structured like this:</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
    </span><span class="nt">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"rendering"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"items"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
     </span><span class="p">{</span><span class="w">
      </span><span class="nt">"id"</span><span class="p">:</span><span class="w">     </span><span class="s2">"1234"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"type"</span><span class="p">:</span><span class="w">   </span><span class="s2">"banner"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"format"</span><span class="p">:</span><span class="w"> </span><span class="s2">"980x240"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"url"</span><span class="p">:</span><span class="w">    </span><span class="s2">"http://orders.adrapid.com/:orderId/:itemId"</span><span class="w">
     </span><span class="p">}</span><span class="w">
    </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<p>Gets the details of an order. Useful to get the status of a given order as well
as the urls for the results. The urls are short lived and should be used by the
client of the API just to copy them to a proper server. The contents of the order
urls are only guaranteed to exist 24 hours after the order has been executed.</p>

<p><code class="prettyprint">GET http://api.adrapid.com/orders/:id</code></p>

<h3 id="url-parameters">URL Parameters</h3>

<table><thead>
<tr>
<th>Parameter</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>id</td>
<td>id of the order we want to retrieve its data.</td>
</tr>
</tbody></table>

          <h1 id="events">Events</h1>

<p>Events are generated through Server Sent Events (SSE:s). This enable tracking orders in real time
and display them on the browser as they are completed.</p>

<h2 id="watching-order-events">Watching order events</h2>

<blockquote>
<p>item_complete event:</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
    </span><span class="nt">"id"</span><span class="p">:</span><span class="w">     </span><span class="s2">"1234"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"type"</span><span class="p">:</span><span class="w">   </span><span class="s2">"banner"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"format"</span><span class="p">:</span><span class="w"> </span><span class="s2">"300x300"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"url"</span><span class="p">:</span><span class="w">    </span><span class="s2">"http://orders.adrapid.com/:orderId/:itemId"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<blockquote>
<p>order_complete event:</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
    </span><span class="nt">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"123"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"items"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
     </span><span class="p">{</span><span class="w">
      </span><span class="nt">"id"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"1234"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"orders.adrapid.com/:orderId/:itemId"</span><span class="w">
     </span><span class="p">}</span><span class="w">
    </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<pre class="highlight javascript"><code><span class="c1">//</span>
<span class="c1">// Vanilla javascript example</span>
<span class="c1">//</span>

<span class="kd">function</span> <span class="nx">watch_order</span><span class="p">(</span><span class="nx">order_id</span><span class="p">,</span> <span class="nx">api_key</span><span class="p">)</span>
<span class="p">{</span>
  <span class="c1">//</span>
  <span class="c1">// setup &amp; initialize the EventSource</span>
  <span class="c1">//</span>
  <span class="kd">var</span> <span class="nx">base_url</span>    <span class="o">=</span> <span class="s1">'http://api.adrapid.com/events/order'</span><span class="p">,</span>
      <span class="nx">token</span>       <span class="o">=</span> <span class="nx">generate_token</span><span class="p">(</span><span class="nx">api_key</span><span class="p">),</span>
      <span class="nx">evt_url</span>     <span class="o">=</span> <span class="nx">base_url</span> <span class="o">+</span> <span class="nx">order_id</span> <span class="o">+</span> <span class="s1">'/'</span> <span class="o">+</span> <span class="nx">token</span><span class="p">,</span>
      <span class="nx">evtSource</span>   <span class="o">=</span> <span class="k">new</span> <span class="nx">EventSource</span><span class="p">(</span><span class="nx">evt_url</span><span class="p">);</span>

  <span class="c1">//</span>
  <span class="c1">// listen to eventsource events</span>
  <span class="c1">//</span>

  <span class="c1">//</span>
  <span class="c1">// show items as they are completed</span>
  <span class="c1">//</span>
  <span class="nx">evtSource</span><span class="p">.</span><span class="nx">addEventListener</span><span class="p">(</span><span class="s2">"item_complete"</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">e</span><span class="p">)</span> <span class="p">{</span>
      <span class="kd">var</span> <span class="nx">data</span> <span class="o">=</span> <span class="nx">JSON</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="nx">e</span><span class="p">.</span><span class="nx">data</span><span class="p">);</span> <span class="c1">// parse json data to array</span>
      <span class="nx">show_banner</span><span class="p">(</span><span class="nx">data</span><span class="p">.</span><span class="nx">id</span><span class="p">);</span> <span class="c1">// show result using a custom function</span>
  <span class="p">},</span> <span class="kc">false</span><span class="p">);</span>

  <span class="c1">//</span>
  <span class="c1">// show an message when all order items have been completed</span>
  <span class="c1">//</span>
  <span class="nx">evtSource</span><span class="p">.</span><span class="nx">addEventListener</span><span class="p">(</span><span class="s1">'order_complete'</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">e</span><span class="p">)</span> <span class="p">{</span>
      <span class="kd">var</span> <span class="nx">order</span> <span class="o">=</span> <span class="nx">JSON</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="nx">e</span><span class="p">.</span><span class="nx">data</span><span class="p">);</span>
      <span class="nx">alert</span><span class="p">(</span><span class="s1">'Successfully completed order #'</span> <span class="o">+</span> <span class="nx">order</span><span class="p">.</span><span class="nx">id</span> <span class="o">+</span> <span class="s1">'!'</span><span class="p">);</span>
  <span class="p">},</span> <span class="kc">false</span><span class="p">);</span>
<span class="p">}</span>
</code></pre>

<p>Use the following endpoint to watch for order events. The endpoint emits two events: <em>item_complete</em> and <em>order_complete</em>.</p>

<h3 id="sse-endpoint">SSE Endpoint</h3>

<p><code class="prettyprint">http://api.adrapid.com/events/order/:id/:token</code></p>

          <h1 id="errors">Errors</h1>

<aside class="notice">
These are generic errors that can be returned by any of the API calls provided in this reference.
For more specific errors check every API call documentation.
</aside>

<p>The AdRapid API uses the following error codes:</p>

<table><thead>
<tr>
<th>Error Code</th>
<th>Meaning</th>
</tr>
</thead><tbody>
<tr>
<td>400</td>
<td>Bad Request &ndash; Your request is invalid</td>
</tr>
<tr>
<td>401</td>
<td>Unauthorized &ndash; Your API/Token key is incorrect</td>
</tr>
<tr>
<td>403</td>
<td>Forbidden &ndash; The kitten requested is hidden for administrators only</td>
</tr>
<tr>
<td>404</td>
<td>Not Found &ndash; The specified resource could not be found</td>
</tr>
<tr>
<td>429</td>
<td>Too Many Requests &ndash; Too many requests</td>
</tr>
<tr>
<td>500</td>
<td>Internal Server Error &ndash; We had a problem with our server. Try again later.</td>
</tr>
<tr>
<td>503</td>
<td>Service Unavailable &ndash; We&rsquo;re temporarially offline for maintanance. Please try again later.</td>
</tr>
</tbody></table>

      </div>
      <div class="dark-box">
          <div class="lang-selector">
                <a href="#" data-language-name="shell">shell</a>
                <a href="#" data-language-name="javascript">javascript</a>
          </div>
      </div>
    </div>
  </body>
</html>
